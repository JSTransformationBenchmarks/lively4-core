{"script":"{\"6b0aa7ab-a552-45ca-967f-2627694a360b\":{\"type\":\"transform\",\"source\":\"[async function* transform(input) {\\n  for await (let item of input) { \\n    const res = await Promise.all(\\n      item.canteens.map(c => \\n        fetch(`https://openmensa.org/api/v2/canteens/${c.id}/days/${item.date.toFormattedString('yyyy-MM-dd')}/meals`)\\n      )\\n    );\\n    const json = await Promise.all(res.map(r => r.json()));\\n    yield json.reduce((p,c) => p.concat(c), [])\\n  }\\n}, {\\n  \\n}]\"},\"bfcdf103-2e15-47d9-b548-ffdcbe836868\":{\"type\":\"extract\",\"source\":\"[item => ({\\n  label: item.name\\n}), {\\n  \\n}]\"},\"f6dd5312-43ce-4b34-b2fc-93ebb6716c47\":{\"type\":\"descent\",\"source\":\"[item => [], {\\n  \\n}]\"}}","outputs":[{"script":"{\"246b3750-6f59-419e-bd0a-335d97dc789f\":{\"type\":\"transform\",\"source\":\"[async function* transform(input) {\\n  for await (let item of input) {\\n    yield Object.entries(item.prices).filter(p => p[1]);\\n  }\\n}, {\\n}]\"},\"debd3907-c089-49d4-b8d1-4ae4f98042a6\":{\"type\":\"extract\",\"source\":\"[item => ({\\n  label: `${item[0]}: ${item[1].toLocaleString(undefined, {\\n    style: \\\"currency\\\",\\n    currency: \\\"EUR\\\"})}`\\n}), {\\n  \\n}]\"},\"ece0c444-50eb-4057-bc0e-2f1902393862\":{\"type\":\"descent\",\"source\":\"[item => [], {}]\"}}","outputs":[],"inputSources":[],"inputs":[{"id":4885300,"name":"Eierfrikassee mit buntem Gemüse,\ndazu Kartoffelpüree","category":"Angebot 1","prices":{"students":1.6,"employees":3.1,"pupils":null,"others":3.1},"notes":["Vegetarisch"]}],"widget":"vivide-tree-widget","id":"vivide-view-8eea7946-3709-45aa-8f92-cb2c5fbafabf"}],"inputSources":[{"script":"{\"e5ba2114-b486-49ba-b542-7a1d8654d29f\":{\"type\":\"transform\",\"source\":\"[async function* transform(input) {\\n  for await (let item of [0,1,2,3,4,5, 6]) {\\n    let today = new Date();\\n    today.setDate(today.getDate()+item);\\n    yield ({\\n      date: today,\\n      canteens: input\\n    });\\n  }\\n}, {\\n  \\n}]\"},\"ab8d8386-92ef-4cad-8f3a-a885739d0418\":{\"type\":\"extract\",\"source\":\"[item => ({\\n  label: item.date.toLocaleDateString()\\n}), {\\n  \\n}]\"},\"4742f254-cdc6-4b9d-b531-b72881ba916f\":{\"type\":\"descent\",\"source\":\"[item => [], {\\n  \\n}]\"}}","outputs":[],"inputSources":[{"script":"{\"4680f237-88a0-4ed1-8c19-e5dc103ab2d1\":{\"type\":\"transform\",\"source\":\"[async function* transform(input) {\\n  const res = await fetch('https://openmensa.org/api/v2/canteens?near[lat]=52.393535&near[lng]=13.127814&near[dist]=5');\\n  const json = await res.json();\\n  for await (let item of json) {\\n    yield item;\\n  }\\n}, {\\n  \\n}]\"},\"b688f0c8-b873-4232-9a0a-6444549daedb\":{\"type\":\"extract\",\"source\":\"[item => ({\\n  label: item.name\\n}), {\\n  \\n}]\"},\"574795a5-7052-456f-aae4-90748f14fbfd\":{\"type\":\"descent\",\"source\":\"[item => [item.address], {\\n  \\n}]\"}}","outputs":[],"inputSources":[],"inputs":[1,2,3,4,5],"widget":"vivide-tree-widget","id":"vivide-view-fed4a62d-eebe-4cf6-9552-d1d3c80fb4b2"}],"inputs":[{"id":62,"name":"Mensa Griebnitzsee","city":"Potsdam","address":"August-Bebel-Str. 89, 14482 Potsdam","coordinates":[52.3935353446923,13.1278145313263]}],"widget":"vivide-tree-widget","id":"vivide-view-e9fa8e27-9aaf-48a0-b0b4-a1bbd6e83fbd"}],"inputs":[{"date":"2020-02-06T19:04:36.602Z","canteens":[{"id":62,"name":"Mensa Griebnitzsee","city":"Potsdam","address":"August-Bebel-Str. 89, 14482 Potsdam","coordinates":[52.3935353446923,13.1278145313263]}]}],"widget":"vivide-tree-widget","id":"vivide-view-e9a89366-773d-4397-9fa1-9fe4ca3e542f"}